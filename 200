// ’¥«¥£à ä - ä®à¬¨àã¥â á®®¡é¥¨¥ ¯à¨ ¯®¬®é¨  §¡ãª¨ Œ®à§¥
#include "stdio.h"
#include "conio.h"
#include "string.h"  // strlen
#include "dos.h"     // delay

  // ¯ à ¬¥âàë ¯¥à¥¤ ç¨
#define  TONE 100  // ç áâ®â  á¨£ «  (ƒæ)
#define   L1   50  // ¤«¨â¥«ì®áâì (¬á) "â®çª¨"
#define   L2  100  // ¤«¨â¥«ì®áâì (¬á) "â¨à¥"
#define   L3   50  // ¯ ã§  (¬á) ¬¥¦¤ã â®çª ¬¨ ¨ â¨à¥ ®¤®© ¡ãª¢ë
#define   L4  100  // ¯ ã§  (¬á) ¬¥¦¤ã ¡ãª¢ ¬¨
#define   L5  150  // ¯ ã§  (¬á) ¬¥¦¤ã á«®¢ ¬¨

void main()
{
    // ª®¤¨à®¢ª  ¡ãª¢ àãááª®£®  «ä ¢¨â 
    char *morse[] = {
        ".-  ","-...",".---","--. ", //€,,‚,ƒ
        "-.. ",".   ","...-","--..", //„,…,†,‡
        "..  ",".---","-.- ",".-..", //ˆ,‰,Š,‹
        "--  ","-.  ","--- ",".--.", //Œ,,Ž,
        ".-. ","... ","-   ","..- ", //,‘,’,“
        "..-.","....","-.-.","---.", //”,•,–,—
        "----","--.-","-..-","-.--", //˜,™,š,›
        "-..-","..-.","..--",".-.-"  //œ,,ž,Ÿ
        };

    unsigned char mes[80];  // á®®¡é¥¨¥
    char sim[4];   // á¨¬¢®« ¢ ª®¤¨à®¢ª¥ Œ®à§¥ -
                   //  ¯®á«¥¤®¢ â¥«ì®áâì â®ç¥ª ¨ â¨à¥
    char znak;     // "¯¥à¥¤ ¢ ¥¬ë©" § ª - â¨à¥ ¨«¨ â®çª 
    int i,j;       // ®¬¥à á¨¬¢®«  ¨ § ª 

    puts("\n*** ’¥«¥£à ä ***");
    puts("‚¢¥¤¨â¥ á®®¡é¥¨¥, ª®â®à®¥  ¤® ¯¥à¥¤ âì");
    puts("(¨á¯®«ì§ã©â¥ â®«ìª® ¯à®¯¨áë¥ àãááª¨¥ ¡ãª¢ë)");
    printf("->");
    gets(mes);
    for (i = 0; i < strlen(mes); i++)
    {
        if (mes[i] >= '€' && mes[i] <='Ÿ')
        {
        // ®¯à¥¤¥«¨¬ ª®¤ ®ç¥à¥¤®© ¡ãª¢ë (äãªæ¨ï Ord) á®®¡é¥¨ï
        // ¨ ¯®«ãç¨¬ ¨§ â ¡«¨æë ª®¤¨à®¢ª¨ á®®â¢¥âáâ¢ãîé¨©
        // í«¥¬¥â ¬ áá¨¢  - ¯®á«¥¤®¢ â¥«ì®áâì â®ç¥ª ¨ â¨à¥
        strcpy(sim,morse[mes[i]-128]);
        j = 0;
        do
            if (sim[j] == '-' || sim[j] == '.')
            {
                putch(sim[j++]);
                sound(1000);
                if (sim[j] == '.')
                    delay(L1);
                else delay(L2);
                nosound;
                delay(L3);
            }
      while ( sim[j] != ' ' && j <4 );
      delay(L4); // ¯ ã§  ¬¥¦¤ã ¡ãª¢ ¬¨
     }
     else
       if (mes[i] == ' ')  // ¯à®¡¥« ¬¥¦¤ã á«®¢ ¬¨
       {
          printf("  "); // ¯à®¡¥« ¬¥¦¤ã á«®¢ ¬¨ á®®¡é¥¨ï
          delay(L5);
       }
  }
  puts("\n‘®®¡é¥¨¥ ¯¥à¥¤ ®!");
  puts("„«ï § ¢¥àè¥¨ï à ¡®âë  ¦¬¨â¥ <Enter>");
  getch();
}
