// à¥®¡à §ã¥â è¥áâ ¤æ â¥à¨ç®¥ ç¨á«® ¢ ¤¥áïâ¨ç®¥
// à §®¡à âìáï á ¯¥à¥¯®«¥¨¥¬!
#include <stdio.h>
#include <conio.h>
#include "string.h"
void main()
{
    char st[5];      // è¥áâ ¤æ â¥à¨ç®¥ ç¨á«®
    unsigned int dec;// ¤¥áïâ¨ç®¥ ç¨á«®, á®®â¢¥âáâ¢ãîé¥¥
    int v;           // ¢¥á à §àï¤  è¥áâ ¤æ â¥à¨ç®£® ç¨á« 
    int err = 0;     // err == 1 - ¢ áâà®ª¥ ¥¤®¯ãáâ¨¬ë© á¨¬¢®«
    int i;

    printf("‚¢¥¤¨â¥ è¥áâ ¤æ â¥à¨ç®¥ ");
    printf("(¥ ¡®«¥¥ 4-å § ª®¢) ç¨á«®\n");
    printf("-> ");
    scanf("%s",&st);

    // ¯à¥®¡à §ã¥¬ ¢¢¥¤¥ãî áâà®ªã ª ¢¥àå¥¬ã à¥£¨áâàã
    strupr(st);

    dec = 0;
    v = 1;    // ¢¥á ¬« ¤è¥£® à §àï¤  è¥áâ ¤æ â¥à¨ç®£® ç¨á« 
    for ( i = strlen(st) -1; i >= 0; i--)
    {
      //printf("\n%d\n",v);
      if (st[i] >= '0' && st[i] <= '9')
     dec += v * (st[i]- 48); // (int)'0'=48, (int)'1'=49 ¨ â.¤.
      else
     if (st[i] >= 'A' && st[i] <= 'F')
        // (int)'A'=65, (int)'B'=66 ¨ â.¤.
        // A ®¡®§ ç ¥ 10, B - 11 ¨ â.¤.
        dec += v * (st[i]- 55);
     else // ¥¤®¯ãáâ¨¬ë© á¨¬¢®«
       { err = 1;
         break; }
      v *= 16;     // ¢¥á á«¥¤ãîé¥£® à §àï¤ 
   }
   if ( !err ) {
       printf("˜¥áâ ¤æ â¥à¨ç®¬ã ç¨á«ã %s ", st);
       printf("á®®â¢¥âáâ¢ã¥ ¤¥áïâ¨ç®¥ %u\n", dec);
   }
   else {
       printf("Câà®ª  %s ¥ ï¢«ï¥âáï ", st);
       printf("è¥á ¤æ â¥à¨çë¬ ç¨á«®¬\n");
   }

    printf("\n„«ï § ¢¥àè¥¨ï  ¦¬¨â¥ <Enter>");
    getch();
}
